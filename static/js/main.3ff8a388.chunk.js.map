{"version":3,"sources":["components/Searchbar/Searchbar.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Loader/Loader.module.css","components/Modal/Modal.js","components/Searchbar/Searchbar.js","components/ImageGallery/ImageGallery.js","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/ErrorMessage/ErrorMessage.js","components/Loader/Loader.js","services/api-service.js","App.js","index.js"],"names":["module","exports","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","props","openModal","handleBackdropClick","target","currentTarget","window","addEventListener","this","removeEventListener","createPortal","className","s","Overlay","onClick","src","largeImg","alt","Component","SearchBar","state","query","handleChange","setState","value","toLowerCase","handleSubmit","preventDefault","trim","onSubmit","toast","error","Searchbar","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","onChange","placeholder","ImageGallery","children","ImageGalleryItem","images","map","id","webformatURL","tags","ImageGalleryItemImage","Button","ShowErrorMessage","message","LoaderApp","LoaderContainer","color","height","width","timeout","fetchImage","searchQuery","page","axios","get","then","response","data","hits","Status","App","status","showModal","toggleModal","event","nodeName","targetImg","find","Number","largeImageURL","handleSearchbarSubmit","fetchImages","options","prevState","catch","finally","prevProps","windowScroll","scrollTo","top","documentElement","scrollHeight","behavior","autoClose","Loader","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3ff8a388.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1BQCg\",\"SearchForm\":\"Searchbar_SearchForm__2waUf\",\"SearchFormButton\":\"Searchbar_SearchFormButton__YOW-6\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__gJV7q\",\"SearchFormInput\":\"Searchbar_SearchFormInput__bwnQ9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1OM_V\",\"Modal\":\"Modal_Modal__RxMOB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__Dh8hZ\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__1UcC8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__14J5F\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__1XOL8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LoaderContainer\":\"Loader_LoaderContainer__Op_Mg\"};","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.openModal();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.target === e.currentTarget) {\n      this.props.openModal();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleBackdropClick}>\n        <div className={s.Modal}>\n          <img src={this.props.largeImg} alt=\"\" />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","import { Component } from 'react';\nimport { toast } from 'react-toastify';\n\nimport 'react-toastify/dist/ReactToastify.css';\nimport s from './Searchbar.module.css';\n\nclass SearchBar extends Component {\n  state = {\n    query: '',\n  };\n\n  handleChange = e => {\n    this.setState({\n      query: e.currentTarget.value.toLowerCase(),\n    });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    const { query } = this.state;\n\n    if (query.trim() === '') {\n      toast.error('Please, type the query');\n      return;\n    }\n\n    this.props.onSubmit(query);\n    this.setState({\n      query: '',\n    });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <span className={s.SearchFormButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchFormInput}\n            type=\"text\"\n            value={this.state.query}\n            onChange={this.handleChange}\n            // autocomplete=\"off\"\n            // autofocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default SearchBar;\n","import React from 'react';\nimport s from './ImageGallery.module.css';\n\nconst ImageGallery = ({ children, onClick }) => {\n  return (\n    <ul className={s.ImageGallery} onClick={onClick}>\n      {children}\n    </ul>\n  );\n};\n\nexport default ImageGallery;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport s from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ images }) => {\n  return images.map(({ id, webformatURL, tags }) => (\n    <li key={id} className={s.ImageGalleryItem}>\n      <img\n        src={webformatURL}\n        alt={tags}\n        className={s.ImageGalleryItemImage}\n        id={id}\n      />\n    </li>\n  ));\n};\n\nImageGalleryItem.propTypes = {\n  images: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n      tags: PropTypes.string.isRequired,\n    }),\n  ),\n};\n\nexport default ImageGalleryItem;\n","import PropTypes from 'prop-types';\nimport s from './Button.module.css';\n\nconst Button = ({ onClick }) => {\n  return (\n    <button type=\"button\" className={s.Button} onClick={onClick}>\n      Load more\n    </button>\n  );\n};\n\nexport default Button;\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","export default function ShowErrorMessage({ message }) {\n  return <h1>{message}</h1>;\n}\n","import Loader from 'react-loader-spinner';\nimport { Component } from 'react';\nimport s from './Loader.module.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nclass LoaderApp extends Component {\n  render() {\n    return (\n      <div className={s.LoaderContainer}>\n        <Loader\n          type=\"Puff\"\n          color=\"#00BFFF\"\n          height={100}\n          width={100}\n          timeout={3000}\n        />\n      </div>\n    );\n  }\n}\n\nexport default LoaderApp;\n","import axios from 'axios';\n\nconst BASEURL = 'https://pixabay.com/api/';\nconst APIKEY = '19817387-6793f3100509fa593759a5ec0';\n\nconst fetchImage = ({ searchQuery, page }) => {\n  return axios\n    .get(\n      `${BASEURL}?q=${searchQuery}&page=${page}&key=${APIKEY}&image_type=photo&orientation=horizontal&per_page=12`,\n    )\n    .then(response => response.data.hits);\n};\n\nexport default fetchImage;\n","import Modal from './components/Modal';\nimport SearchBar from './components/Searchbar/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport ImageGalleryItem from './components/ImageGallery/ImageGalleryItem';\nimport Button from './components/Button';\nimport ShowErrorMessage from './components/ErrorMessage';\nimport Loader from './components/Loader';\nimport fetchImage from './services/api-service';\n\nimport { Component } from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\n\nimport './App.css';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nclass App extends Component {\n  state = {\n    images: [],\n    searchQuery: '',\n    page: 1,\n    status: Status.IDLE,\n    error: null,\n    largeImg: '',\n    showModal: false,\n  };\n\n  //реагирует на запись стейта и делает запросы\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      // console.log('Изменился запрос');\n      this.fetchImages();\n    }\n\n    this.windowScroll();\n  }\n\n  windowScroll() {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  }\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  openModal = event => {\n    // console.log(event.target);\n    // console.log(event.target.nodeName);\n    if (event.target.nodeName === 'IMG') {\n      this.toggleModal();\n    }\n\n    const targetImg = this.state.images.find(\n      ({ id }) => id === Number(event.target.id),\n    );\n    this.setState({ largeImg: targetImg.largeImageURL });\n  };\n\n  //делает запись в стейт\n  handleSearchbarSubmit = query => {\n    this.setState({ searchQuery: query, page: 1, images: [], error: null });\n  };\n\n  fetchImages = () => {\n    const { page, searchQuery } = this.state;\n    // объект настроек(если более двух)\n    const options = { searchQuery, page };\n\n    this.setState({ status: Status.PENDING });\n\n    fetchImage(options)\n      .then(images => {\n        this.setState(prevState => ({\n          images: [...prevState.images, ...images],\n          page: prevState.page + 1,\n        }));\n      })\n      .catch(error => {\n        this.setState({ error, status: Status.REJECTED });\n        toast.error('Sorry, try again');\n      })\n      .finally(() => {\n        this.setState({ status: Status.RESOLVED });\n      });\n  };\n\n  render() {\n    const { images, status, showModal, largeImg } = this.state;\n\n    if (status === Status.IDLE) {\n      return (\n        <>\n          <SearchBar onSubmit={this.handleSearchbarSubmit}></SearchBar>;\n          <ToastContainer autoClose={3000} />\n        </>\n      );\n    }\n\n    if (status === Status.PENDING) {\n      return (\n        <>\n          <Loader />\n        </>\n      );\n    }\n\n    if (status === Status.REJECTED) {\n      return <ShowErrorMessage message=\"Please, try again\" />;\n    }\n\n    if (status === Status.RESOLVED) {\n      return (\n        <>\n          <div className=\"App\">\n            <SearchBar onSubmit={this.handleSearchbarSubmit}></SearchBar>\n            <ImageGallery onClick={this.openModal}>\n              <ImageGalleryItem images={images} />\n            </ImageGallery>\n            {images.length > 0 && <Button onClick={this.fetchImages}></Button>}\n            {showModal && (\n              <Modal largeImg={largeImg} openModal={this.toggleModal} />\n            )}\n            <ToastContainer autoClose={3000} />\n          </div>\n        </>\n      );\n    }\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}